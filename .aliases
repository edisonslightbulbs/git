#!/bin/zsh

# .aliases:
#   Aliases for custom git work-flows (optimized).
# author: Everett
# created: 2020-10-26 11:25
# Github: https://github.com/antiqueeverett/

# -- checkout
git config --global alias.co 'checkout'
git config --global alias.cobr 'checkout -b'

# -- status and logs
git config --global alias.ss 'status'
git config --global alias.lg 'git log'
git config --global alias.lgr 'git reflog'
git config --global alias.lgp 'log --pretty="format:%h %G? %aN  %s"'

# -- submodule operations
git config --global alias.subadd 'submodule add'

# -- branch operations
git config --global alias.br 'branch'
git config --global alias.brm 'branch -m'
git config --global alias.brd 'branch -d'
git config --global alias.brf 'branch -f'

# -- rebase operations
git config --global alias.rbi 'rebase -i'

# -- reset
git config --global alias.rst 'restore'
git config --global alias.rst-h 'reset --hard'
git config --global alias.rst-s 'reset --soft'

# -- size and tracking
git config --global alias.size 'count-objects -vH'
git config --global alias.track 'ls-tree -r master --name-only'

# -- patch
git config --global alias.patch 'git add --patch'


# -- alias git funntions
FUNCTIONS="$HOME/dotfiles/git/functions.zsh"
source "$FUNCTIONS"

# git:
#   Overrides the git command.
function git () {
    # -- basics
    if [ "$1" = "root" ]; then
        root
    elif [ "$1" = "diff" ]; then
        diff
    elif  [ "$1" = "pull" ]; then
        pull
    elif [ "$1" = "clone" ]; then
        clone "$@"

    # -- submodule operations
    elif  [ "$1" = "subrm" ]; then
        subrm "$1"

    # -- submodule operations
    elif  [ "$1" = "rbm" ]; then
        rbm

    # -- OTRW revert to normal git command
    else
        command git "$@"
    fi
}
